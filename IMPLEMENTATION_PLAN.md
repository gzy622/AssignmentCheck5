# 执行计划（1~6）

## 执行纪律（必须）
- 每完成一步（1~6 中任意一条）后，必须在回报中给出对应 `git message`（Conventional Commit 前缀 + 简体中文描述）。
- 若该步尚未提交，也必须先提供“建议提交信息（git message）”用于记录与确认。
- 从现在起，所有回报中的 `git message` 必须放在 Markdown 代码块内，便于直接复制。

## 1. 安全修复（最高优先）
- 将渲染层中涉及用户可控数据的 `innerHTML` 字符串拼接改为 DOM API + `textContent`。
- 覆盖学生卡片、作业列表、统计明细、历史图等主要渲染路径。
- 避免导入内容（姓名、作业名等）被当作 HTML 执行。

## 2. 导入流程加固
- 强化导入类型识别，减少“任意文本误导入”风险。
- 导入前增加预检与二次确认。
- 导入覆盖前自动备份，支持失败恢复。

## 3. 事件绑定稳定性
- 显式获取关键 DOM 节点，移除对隐式全局变量依赖。
- 对事件绑定增加空值保护，避免节点缺失导致脚本中断。

## 4. 可访问性改造
- 将可点击 `div` 改为语义化控件（优先 `button`），或补齐 `role/tabindex/aria-*`。
- 补齐键盘可操作性与焦点可见性。
- 优化移动端缩放限制策略。

## 5. 剪贴板兼容升级
- 优先使用 `navigator.clipboard.writeText`。
- 在不支持时降级到 `execCommand('copy')`。

## 6. 死代码清理与文档一致性
- 清理无效分支与无对应 DOM 的代码。
- 统一默认历史趋势次数（代码与 README 保持一致）。
- 做未引用逻辑与无效选择器扫尾检查。
